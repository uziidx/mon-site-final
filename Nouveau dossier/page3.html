<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nour l'IA – Edu-trading</title>
  <link rel="stylesheet" href="css/style.css" />
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <style>body,html,nav ul{display:flex;padding:0;margin:0}#chatbox,body,button,html,nav a{color:#fff}#chatbox,#typing,.bot,.user,nav a{text-shadow:1px 1px 2px rgb(0 0 0 / .9)}.user,h2,nav a:hover{color:#00bcd4}footer p,h2{text-align:center}body,html{height:100%;font-family:'Segoe UI',sans-serif;flex-direction:column;background:0 0}main{flex:1}#background-video{position:fixed;top:0;left:0;min-width:100%;min-height:100%;object-fit:cover;z-index:-1;filter:brightness(.7)}.container{max-width:900px;margin:40px auto;padding:20px;background-color:#000;border-radius:10px;box-shadow:0 0 20px rgb(0 0 0 / .8)}h2{text-shadow:1px 1px 4px rgb(0 0 0 / .9)}#chatbox{width:100%;max-height:400px;overflow-y:auto;background:#000;padding:15px;border:1px solid #333;border-radius:8px;margin-bottom:15px}.msg{margin:8px 0}.bot{color:#a1eafb;white-space:pre-wrap}#typing{color:#aaa;font-style:italic;margin-bottom:10px}button,input{padding:10px;font-size:16px;border-radius:5px;border:none}#userInput{flex:1;background:#eee;color:#000}#controls{display:flex;gap:10px}button{background:#00bcd4;cursor:pointer;transition:background .3s}button:hover{background:#0097a7}footer,header{background-color:#000;color:#fff;padding:5px 20px}.header-container{display:flex;justify-content:space-between;align-items:center}.logo-title{display:flex;align-items:center}.logo{height:50px;margin-right:10px}nav ul{list-style:none;gap:20px}nav a{text-decoration:none;font-weight:700;transition:color .3s}footer .container{max-width:1200px;margin:0 auto;padding:10px 20px}header{background-color:#000;color:#fff;padding:20px 0;position:relative;z-index:2}.header-container{display:flex;justify-content:space-between;align-items:center}.logo-title{display:flex;align-items:center}.logo{width:50px;height:auto;margin-right:15px}header h1{margin:0;font-family:'Montserrat',sans-serif;font-size:28px;letter-spacing:2px;text-transform:uppercase}footer p{margin:0;font-size:.9em}@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Montserrat:wght@600;700&display=swap);.strategie,header{position:relative}.strategie h2,header h1{font-family:Montserrat,sans-serif;font-size:28px}.contact-section h2,footer{margin-top:40px;text-align:center}.strategie,form{border-radius:8px}footer,header{background-color:#000}#page-ia nav ul,body,html,nav ul{display:flex;padding:0}#page-ia nav a,nav ul li a{text-decoration:none;transition:color .3s}.container{width:80%;margin:0 auto}header{color:#fff;padding:20px 0;z-index:2}.header-container{display:flex;justify-content:space-between;align-items:center}#page-ia.logo-title,.logo-title{display:flex;align-items:center}.logo{width:50px;height:auto;margin-right:15px}header h1{margin:0;letter-spacing:2px;text-transform:uppercase}nav ul{list-style-type:none;margin:0;gap:20px}nav ul li{display:inline}nav ul li a{color:#fff;font-size:18px;font-weight:500;letter-spacing:1px}nav ul li a:focus,nav ul li a:hover{text-decoration:none;color:gold}.strategie{margin:40px 0;padding:20px;background-color:rgba(255,255,255,.7);box-shadow:0 2px 8px rgba(0,0,0,.1)}.strategie h2{margin-bottom:10px;color:#333}.strategie-content{display:flex;align-items:center;gap:20px;flex-wrap:wrap}.strategie-img{max-width:300px;width:100%;border-radius:6px;box-shadow:0 1px 6px rgba(0,0,0,.1)}.strategie p{flex:1;font-size:1rem;color:#333}footer{color:#fff;padding:15px 0;font-size:.9rem;user-select:none}.video-background{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}#video-background{object-fit:cover;width:100%;height:100%}body,html{margin:0;height:100%;flex-direction:column}body{font-family:Roboto,sans-serif;background-color:#f4f4f4;color:#333;flex:1}.contact-section h2,label{font-family:Montserrat,sans-serif}footer,header{flex-shrink:0}section.simulation{flex:1;padding-bottom:40px}.page-wrapper{display:flex;flex-direction:column;min-height:100vh}.main-content{flex:1;display:flex;justify-content:center;align-items:flex-start;padding-top:40px}.contact-section{width:100%;max-width:800px;margin:0 auto;position:relative;z-index:1;padding:0 20px}.contact-section h2{font-size:36px;margin-bottom:20px}form{display:flex;flex-direction:column;width:100%;max-width:700px;min-height:600px;margin:60px auto;padding:40px;background-color:rgba(255,255,255,.9);box-shadow:0 4px 10px rgba(0,0,0,.2);justify-content:space-between}.form-group{flex:1;display:flex;flex-direction:column;justify-content:center;margin-bottom:20px}label{font-weight:700;color:#333}input,textarea{width:100%;padding:10px;font-size:16px;border:1px solid #ddd;border-radius:5px;font-family:Roboto,sans-serif;resize:none;flex:1}textarea{height:150px}button,button[type=submit]{align-self:center;margin-top:20px;padding:14px 40px;font-size:18px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-family:Roboto,sans-serif}button:hover,button[type=submit]:hover{background-color:#0056b3}.actions.action{margin:20px}button:not([type=submit]){padding:12px 30px;font-size:16px;background-color:#4caf50}button:not([type=submit]):hover{background-color:#45a049}mark{background-color:#fff;color:#000;padding:0 5px}.logo-link{display:flex;align-items:center;text-decoration:none;color:inherit}.logo-link h1{margin:0;color:#fff;font-size:28px}#page-ia footer,#page-ia header{background-color:#000;color:#fff;padding:10px 20px}#page-ia.footer-container,#page-ia.header-container{max-width:1200px;margin:0 auto;padding:10px 20px;display:flex;justify-content:space-between;align-items:center}#page-ia.logo{height:50px;margin-right:10px}#page-ia nav ul{list-style:none;gap:20px;margin:0}#page-ia nav a{color:#fff;font-weight:700}#page-ia nav a:hover{color:#00bcd4}#page-ia footer p{text-align:center;margin:10px 0 0;font-size:.9em}</style>
</head>
<body>
  <video autoplay muted loop id="background-video">
    <source src="https://videos.pexels.com/video-files/3141208/3141208-uhd_2560_1440_25fps.mp4" type="video/mp4" />
  </video>
<header>
  <div class="container header-container">
    <div class="logo-title">
      <a href="index.html" class="logo-link">
        <img src="images/logo.png" alt="Edu-trading" class="logo" />
        <h1>Edu-trading</h1>
      </a>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="page4.html">Stratégies</a></li>
        <li><a href="page1.html">Courbes en direct</a></li>
        <li><a href="page3.html">Assistant IA</a></li>
        <li><a href="page2.html">Contact</a></li>
      </ul>
    </nav>
  </div>
</header>
  <main>
    <div class="container">
      <h2>Nour – Posez votre question</h2>
      <div id="chatbox"></div>
      <div id="typing"></div>
      <div id="controls">
        <input type="text" id="userInput" placeholder="Pose une question..." />
        <button onclick="sendMessage()">Envoyer</button>
      </div>
    </div>
  </main>
  <footer>
    <div class="container">
      <p>&copy; 2025 Edu Trading. Titouan Raymond / Reynald Watfa / Nour Abdelazim</p>
    </div>
  </footer>
  <script>
    const chatbox = document.getElementById("chatbox");
    const typing = document.getElementById("typing");
    async function sendMessage() {
      const input = document.getElementById("userInput");
      const message = input.value.trim();
      if (!message) return;
      chatbox.innerHTML += <div class="msg user"><strong>Vous:</strong> ${message}</div>;
      input.value = "";
      typing.innerText = "Nour le plus beau est en train de répondre...";
      try {
        const reply = await getGPTResponse(message);
        typing.innerText = "";
        const botMsg = document.createElement("div");
        botMsg.className = "msg bot";
        botMsg.innerHTML = <strong>Ask Nour:</strong> <span id="botText"></span>;
        chatbox.appendChild(botMsg);
        const botText = botMsg.querySelector("#botText");
        let i = 0;
        function typeEffect() {
          if (i < reply.length) {
            botText.textContent += reply.charAt(i);
            i++;
            setTimeout(typeEffect, 20);
          }
        }
        typeEffect();

        chatbox.scrollTop = chatbox.scrollHeight;
      } catch (error) {
        typing.innerText = "";
        chatbox.innerHTML += <div class="msg bot"><strong>Ask Nour:</strong> Erreur lors de la réponse IA.<br><em>${error.message}</em></div>;
        console.error("Erreur dans sendMessage:", error);
      }
    }
    async function getGPTResponse(message) {
      try {
        const response = await fetch("https://9e7ea643-37c2-4ead-a676-e73a8d2a7551-00-2fmvlx92yxpya.worf.replit.dev/ask", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message })
        });
        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(Erreur HTTP ${response.status}: ${errorText});
        }
        const data = await response.json();
        if (!data.reply) {
          throw new Error("Réponse vide de l'API");
        }
        return data.reply.trim();
      } catch (error) {
        throw error;
      }
    }
  </script>
</body>
</html>
